<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="love.css">
    <title>For my crush</title>
    <script>
        // Ki·ªÉm tra xem ng∆∞·ªùi d√πng c√≥ s·ª≠ d·ª•ng thi·∫øt b·ªã di ƒë·ªông (iOS, Android) kh√¥ng
        if (/Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent)) {
            // N·∫øu l√† thi·∫øt b·ªã di ƒë·ªông (bao g·ªìm iOS), thay ƒë·ªïi meta tag viewport cho ph√π h·ª£p
            var meta = document.createElement('meta');
            meta.name = "viewport";
            meta.content = "width=1024, initial-scale=0.4, maximum-scale=1.0, user-scalable=yes";
            document.getElementsByTagName('head')[0].appendChild(meta);
        } else {
            // N·∫øu kh√¥ng ph·∫£i thi·∫øt b·ªã di ƒë·ªông, s·ª≠ d·ª•ng meta tag viewport chu·∫©n
            var meta = document.createElement('meta');
            meta.name = "viewport";
            meta.content = "width=device-width, initial-scale=1.0";
            document.getElementsByTagName('head')[0].appendChild(meta);
        }
    </script>
</head>
<body>
    <!-- Container for windows -->
    <div id="appContainer"></div>
    <!-- N√∫t "·∫§n v√†o" -->
    <button id="centerButton" onclick="navigateToPage()">·∫§n v√†o ƒë·∫•y ƒëiü•∫</button>
    <!-- Audio element -->
    <audio id="backgroundMusic" src="./nhac.mp3" preload="auto"></audio>
    <script src="./mouse.js"></script>
    <script>
        
        // H√†m ƒë√≥ng c·ª≠a s·ªï
        function closeWindow(event) {
            event.target.closest(".app-window").style.display = "none";
        }

        // H√†m ƒëi·ªÅu h∆∞·ªõng sang trang kh√°c
        function navigateToPage() {
            window.location.href = "./heart/heart.html"
        }

        // T·∫°o 100 c·ª≠a s·ªï ·ª©ng d·ª•ng v·ªõi v·ªã tr√≠ ng·∫´u nhi√™n
        const appContainer = document.getElementById("appContainer");
        const containerWidth = window.innerWidth;
        const containerHeight = window.innerHeight;

        for (let i = 0; i < 100; i++) {
            const appWindow = document.createElement("div");
            appWindow.className = "app-window";
            appWindow.innerHTML = `
                <div class="window-header">
                    <span>Tr√†n B·ªô Nh·ªõ R√πi</span>
                    <button class="close-btn" onclick="closeWindow(event)">-</button>
                </div>
                <div class="window-content">
                    <p>Anh nh·ªõ emüíû</p>
                </div>
            `;

            // ƒê·∫∑t v·ªã tr√≠ ng·∫´u nhi√™n cho c·ª≠a s·ªï
            const randomLeft = Math.random() * (containerWidth - 300);
            const randomTop = Math.random() * (containerHeight - 200);
            appWindow.style.left = `${randomLeft}px`;
            appWindow.style.top = `${randomTop}px`;

            appContainer.appendChild(appWindow);

            // T√≠nh nƒÉng k√©o c·ª≠a s·ªï
            const windowHeader = appWindow.querySelector(".window-header");
            let isDragging = false;
            let offsetX, offsetY;

            windowHeader.addEventListener('mousedown', (e) => {
                isDragging = true;
                offsetX = e.clientX - appWindow.offsetLeft;
                offsetY = e.clientY - appWindow.offsetTop;
                document.body.style.cursor = 'move';
            });

            document.addEventListener('mousemove', (e) => {
                if (isDragging) {
                    appWindow.style.left = e.clientX - offsetX + 'px';
                    appWindow.style.top = e.clientY - offsetY + 'px';
                }
            });

            document.addEventListener('mouseup', () => {
                isDragging = false;
                document.body.style.cursor = 'default';
            });
        }

        // Hi·ªÉn th·ªã t·ª´ng c·ª≠a s·ªï m·ªôt c√°ch 1 gi√¢y v√† ph√°t nh·∫°c
        const appWindows = document.querySelectorAll(".app-window");
        const backgroundMusic = document.getElementById("backgroundMusic");

        appWindows.forEach((window, index) => {
            setTimeout(() => {
                window.style.opacity = 1;
                if (index === 0) {
                    backgroundMusic.play(); // Ph√°t nh·∫°c khi c·ª≠a s·ªï ƒë·∫ßu ti√™n hi·ªÉn th·ªã
                }
                if (index === appWindows.length - 1) {
                    // Hi·ªÉn th·ªã n√∫t "·∫§n v√†o" khi c·ª≠a s·ªï cu·ªëi c√πng ƒë∆∞·ª£c hi·ªÉn th·ªã
                    setTimeout(() => {
                        document.getElementById("centerButton").style.display = "block";
                    }, 400);
                }
            }, index * 200);
        });
    </script>
</body>
</html>
